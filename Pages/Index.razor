@page "/"
@using Microsoft.CognitiveServices.Speech
@using Twilio
@using Twilio.Rest.Api.V2010.Account

<PageTitle>Kisaan Pro</PageTitle>
<header>
<div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
        <img  src="Assets/logo.svg" alt="" data-image-width="161" data-image-height="44">
        <h6 class="u-text u-text-default-xs u-text-1"> Last Updated : 15 Jan 22 11:49 am</h6>
        <object data='./Assets/logo.svg' type='image/svg+xml' width='500' height='500' />

      </div>
      </header>
    <section class="u-align-center u-clearfix u-white u-section-1" id="sec-25a0">
      <div class="u-align-left-xs u-clearfix u-sheet u-valign-top-lg u-valign-top-md u-valign-top-sm u-valign-top-xl u-sheet-1">
        <div class="u-align-center-xs u-container-style u-group u-group-1">
            <MudBadge Content="3" Overlap=true>
            <MudButton Link="" Variant="Variant.Outlined" >System Status<span>1</span></MudButton>
            </MudBadge>
          <div class="u-container-layout">
            <MudButton Link="" Variant="Variant.Outlined" >Notifications</MudButton>
            <div class="u-custom-color-6 u-shape u-shape-circle u-shape-1"></div>
          </div>
        </div>
        <div class="u-align-left-xs u-container-style u-group u-group-2">
          <div class="u-container-layout">
            <MudButton Link="" Variant="Variant.Outlined" >Server Status</MudButton>
            <div class="u-custom-color-2 u-shape u-shape-circle u-shape-2"></div>
          </div>
        </div>
        <div class="u-align-left-xs u-container-style u-group u-group-3">
          <div class="u-container-layout">
            <MudTextField @bind-Value="TextValue" Label="Enter Device ID to add" Variant="Variant.Filled"></MudTextField>
            <MudButton Link="" Variant="Variant.Outlined" >Register</MudButton>
          
          </div>
        </div>
        <MudButton Link="" Variant="Variant.Outlined" >Check Your Device Status</MudButton>
        <MudButton Link="" Variant="Variant.Outlined" >solar powered battery<span>80%</span></MudButton>
         
        <MudButton Link="" Variant="Variant.Outlined" >Temperature</MudButton>
        <MudButton Link="" Variant="Variant.Outlined" >pH level</MudButton>
        <MudButton Link="" Variant="Variant.Outlined" >Humidity</MudButton>
        <h2 class="u-text u-text-default-xs u-text-1">39 C</h2>
        <MudButton Link="" Variant="Variant.Outlined" >Recommendation Box</MudButton>
        <div class="u-border-1 u-border-grey-40 u-container-style u-group u-radius-15 u-shape-round u-white u-group-4">
          <div class="u-container-layout u-container-layout-4">
            <p class="u-text u-text-2" spellcheck="false"> Past few days the temperature is above average, hence not suitable for better yeild. According to&nbsp;our  precipitation rate is 10mm/hr.&nbsp;The Water required in the feild would be 20L per 6 Hrs</p>
          </div>
        </div>
       <img class="u-image u-image-default u-preserve-proportions u-image-1" src="Assets/tts.svg" alt="" data-image-width="19" data-image-height="19">
       <MudButton Variant="Variant.Outlined" >Irrigation Pump Switches</MudButton>
       <MudButton Variant="Variant.Outlined"  Style="width:200px; height:116px;" >Start</MudButton>
       <MudButton Variant="Variant.Outlined" Style="width:200px; height:116px" >Stop</MudButton>
        <img class="u-image u-image-default u-preserve-proportions u-image-2" src="" alt="D:\CODES\MIC\Team_KisaanPro\Assets\tts.svg" data-image-width="24" data-image-height="24" />
        
        <div class="u-border-1 u-border-grey-40 u-line u-line-horizontal u-line-1"></div>
        <div class="u-border-1 u-border-grey-40 u-line u-line-horizontal u-line-2"></div>
        <div class="u-border-1 u-border-grey-40 u-line u-line-horizontal u-line-3"></div>
      </div>
      </section>

@code{
    public string Time ;
    public string TextValue;
    public void LastUpdateTime(){
        // Reload Features & Functions

        Time = DateTime.Now.ToString("HH:mm:ss tt");
    }

    // TTS Function
    async void TTS(string Text)
    {
        var config = SpeechConfig.FromSubscription("a8064aa14212402a8bd27284fb3d99c3", "centralindia");
        using var synthesizer = new SpeechSynthesizer(config);
        await synthesizer.SpeakTextAsync(Text);

    }

    // Using Messaging Service
    static void MessagingService(String Command, String Number)
    {
        string accountSid = "ACdabe31cf385a7f2499e5bb4705c8c9c5";
        string authToken = "e19cbfc5cf6c0cfc5b49f2c819434b3c";
        TwilioClient.Init(accountSid,authToken);

        var message = MessageResource.Create(
           body: Command!="Stop"?"Start":"Stop",
           from: new Twilio.Types.PhoneNumber("+18063047362"),
           to: new Twilio.Types.PhoneNumber(Number)
       );
        Console.WriteLine(message.Sid);
    }



}